import{_ as N}from"./a-input.vue_vue_type_script_setup_true_lang-DBNOjAVU.js";import{v as e,h as k,k as v,s as g,g as x,z as E}from"./vendor-CHF6qD04.js";import{u as p}from"./use-backend-admin-store-Cxuf7e6P.js";import{s as f,c as y}from"./main-C4uBXvmg.js";/* empty css               */const h={class:"card settings-main"},M={class:"settings-main-content"},C={class:"settings-footer"},B=e.defineComponent({name:"BackendAdminModify",asyncData(l){const{store:d,route:r,api:i}=l;return p(d).getAdminItem({id:r.params.id,path:r.fullPath},i)},__name:"backend-admin-modify",setup(l){const d=k(),r=v(),i=p(),m=g(i),V=e.toRef(m,"item"),[w,u]=x(!1),n=e.reactive({id:d.params.id,username:"",email:"",password:""});e.watch(V.value,a=>{a.data&&(n.username=a.data.username,n.email=a.data.email)});async function _(){if(!n.username||!n.email){f("请将表单填写完整!");return}if(w.value)return;u(!0);const{code:a,data:t,message:o}=await y.post("backend/admin/modify",n);u(!1),a===200&&(f({type:"success",content:o}),i.updateAdminItem(t),r.push("/backend/admin/list"))}const c=e.ref("编辑管理员 - M.M.F 小屋");return E({title:c,meta:[{name:"description",content:c}]}),(a,t)=>{const o=N,b=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",h,[e.createElementVNode("div",M,[e.createElementVNode("form",null,[e.createVNode(o,{title:"昵称"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.unref(n).username=s),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[e.vModelText,e.unref(n).username]]),t[3]||(t[3]=e.createElementVNode("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),e.createVNode(o,{title:"邮箱"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.unref(n).email=s),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[e.vModelText,e.unref(n).email]]),t[4]||(t[4]=e.createElementVNode("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1}),e.createVNode(o,{title:"密码"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.unref(n).password=s),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[e.vModelText,e.unref(n).password]]),t[5]||(t[5]=e.createElementVNode("span",{class:"input-info error"},"请输入密码",-1))]),_:1})])]),e.createElementVNode("div",C,[e.createElementVNode("a",{href:"javascript:;",class:"btn btn-yellow",onClick:_},"编辑管理员"),e.createVNode(b,{to:"/backend/admin/list",class:"btn btn-blue"},{default:e.withCtx(()=>t[6]||(t[6]=[e.createTextVNode("返回")])),_:1})])])}}});export{B as default};
