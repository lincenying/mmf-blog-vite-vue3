import{v as e}from"./vendor-DvyKuS15.js";import{a as g,b as k,s as u,c as h}from"./main-D8-klkuU.js";import{u as E}from"./use-frontend-article-store-uLevfqnX.js";const V={class:"card card-other"},A=e.defineComponent({name:"AsideOther",__name:"aside-other",setup(l){return(r,s)=>(e.openBlock(),e.createElementBlock("div",V,s[0]||(s[0]=[e.createStaticVNode('<div class="card-content"><ul class="other-item"><li>当前版本: v3.0.0</li><li>项目开源地址: <a href="https://github.com/lincenying/mmf-blog-vite-vue3" target="_blank">Vue3版(Spa+Pwa)</a></li><li>项目开源地址: <a href="https://github.com/lincenying/mmf-blog-vite-vue3-ssr" target="_blank">服务端渲染版(Ssr+Pwa)</a></li><li>网站备案号: <a href="http://beian.miit.gov.cn" target="_blank">浙ICP备15010753号-1</a></li></ul></div>',1)])))}}),w="/static/images/topic-1.png",y={class:"card card-topics"},N={class:"topic-title"},b={class:"topic-meta"},I=e.defineComponent({name:"AsideCategory",__name:"aside-category",props:{category:{}},setup(l){const r=l,s=e.toRefs(r),o=e.toRef(s,"category");return(p,a)=>{const d=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",y,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,i=>(e.openBlock(),e.createBlock(d,{key:i._id,to:`/category/${i._id}`,class:"topic-item"},{default:e.withCtx(()=>[a[1]||(a[1]=e.createElementVNode("span",{class:"avatar-link"},[e.createElementVNode("img",{src:w,class:"avatar-image",alt:""})],-1)),e.createElementVNode("div",null,[e.createElementVNode("h3",N,e.toDisplayString(i.cate_name),1),e.createElementVNode("p",b,e.toDisplayString(i.cate_num||0)+" 篇文章",1),a[0]||(a[0]=e.createElementVNode("i",{class:"icon icon-arrow-right"},null,-1))])]),_:2},1032,["to"]))),128))])}}}),$={class:"actions-wrap"},S={class:"text"},B={class:"text"},x={href:"javascript:;",class:"action-item"},C={class:"text"},R={href:"javascript:;",class:"action-item action-item-fav"},D={class:"text"},M=e.defineComponent({name:"ItemActions",__name:"item-actions",props:{item:{}},setup(l){const r=l,s=e.toRefs(r),o=e.toRef(s,"item"),p=g(),a=e.toRefs(p),d=e.toRef(a,"cookies"),i=E(),_=e.computed(()=>!!d.value.user),m=k(async()=>{if(!_.value){u("请先登录!"),p.setLoginModal(!0);return}let c="frontend/like";o.value.like_status&&(c="frontend/unlike");const{code:t,message:n}=await h.get(c,{id:o.value._id});t===200&&(u({type:"success",content:n}),i.modifyLikeStatus({id:o.value._id,status:!o.value.like_status}))});function v(){const c=window.screen.height/2-250,t=window.screen.width/2-300,n=`${o.value.title} - M.M.F 小屋`,f=`https://www.mmxiaowu.com/article/${o.value._id}`;window.open(`http://service.weibo.com/share/share.php?title=${encodeURIComponent(n.replace(/&nbsp;/g," ").replace(/<br \/>/g," "))}&url=${encodeURIComponent(f)}`,"分享至新浪微博",`height=500, width=600, top=${c}, left=${t}, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no`)}return(c,t)=>(e.openBlock(),e.createElementBlock("div",$,[o.value.like_status?(e.openBlock(),e.createElementBlock("a",{key:0,href:"javascript:;",class:"action-item active",onClick:t[0]||(t[0]=(...n)=>e.unref(m)&&e.unref(m)(...n))},[t[2]||(t[2]=e.createElementVNode("i",{class:"icon icon-action-voteup-active"},null,-1)),e.createElementVNode("span",S,e.toDisplayString(o.value.like)+" 赞",1)])):(e.openBlock(),e.createElementBlock("a",{key:1,href:"javascript:;",class:"action-item",onClick:t[1]||(t[1]=(...n)=>e.unref(m)&&e.unref(m)(...n))},[t[3]||(t[3]=e.createElementVNode("i",{class:"icon icon-action-voteup"},null,-1)),e.createElementVNode("span",B,e.toDisplayString(o.value.like)+" 赞",1)])),e.createElementVNode("a",x,[t[4]||(t[4]=e.createElementVNode("i",{class:"icon icon-action-comment"},null,-1)),e.createElementVNode("span",C,e.toDisplayString(o.value.comment_count)+" 评论",1)]),e.createElementVNode("a",R,[t[5]||(t[5]=e.createElementVNode("i",{class:"icon icon-action-fav"},null,-1)),e.createElementVNode("span",D,e.toDisplayString(o.value.visit)+" 浏览",1)]),e.createElementVNode("a",{href:"javascript:;",class:"action-item",onClick:v},t[6]||(t[6]=[e.createElementVNode("i",{class:"icon icon-action-share"},null,-1),e.createElementVNode("span",{class:"text"},"分享",-1)]))]))}});export{M as _,I as a,A as b};
