import{_ as T,a as S,b}from"./item-actions.vue_vue_type_script_setup_true_lang-DRAIXiGG.js";import{u as k,_ as R}from"./use-frontend-article-store-C2z-BeOI.js";import{v as e,h as A,s as x,g as D,z as L,C as F}from"./vendor-CHF6qD04.js";import{u as E}from"./use-global-category-store-C6X-qPgc.js";import{u as I}from"./main-C4uBXvmg.js";/* empty css               */const P={class:"card feed"},M={class:"feed-content"},j={class:"feed-desc-wrap"},z={class:"feed-article-content markdown-body"},H=e.defineComponent({name:"TopicsItemNone",__name:"topics-item-none",setup(l){return(o,i)=>(e.openBlock(),e.createElementBlock("div",P,[e.createElementVNode("div",M,[e.createElementVNode("div",j,[e.createElementVNode("div",z,[e.renderSlot(o.$slots,"default")])])])]))}}),q={class:"card feed"},G={class:"feed-content"},J={class:"feed-source-time"},K={class:"feed-source"},O={class:"feed-time"},Q={class:"feed-main-link-wrap"},U={class:"feed-desc-wrap"},W={class:"feed-article-content markdown-body"},X=e.defineComponent({name:"TopicsItem",__name:"topics-item",props:{item:{}},setup(l){const o=l,i=e.toRefs(o),t=e.toRef(i,"item");return(d,c)=>{const s=e.resolveComponent("router-link"),a=T;return e.openBlock(),e.createElementBlock("div",q,[e.createElementVNode("div",G,[e.createElementVNode("div",J,[e.createElementVNode("span",K,[c[0]||(c[0]=e.createTextVNode("来自分类 ")),e.createVNode(s,{to:`/category/${t.value.category}`,class:"feed-minor-link"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.value.category_name),1)]),_:1},8,["to"])]),e.createElementVNode("span",O,e.toDisplayString(t.value.update_date),1)]),e.createElementVNode("div",Q,[e.createVNode(s,{to:`/article/${t.value._id}`,class:"feed-main-link"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.value.title),1)]),_:1},8,["to"])]),e.createElementVNode("div",U,[e.createElementVNode("div",W,e.toDisplayString(t.value.content),1)])]),e.createVNode(a,{item:t.value},null,8,["item"])])}}}),Y={class:"main wrap"},Z={class:"main-left"},ee={class:"cards-wrap home-feeds"},te={key:0,class:"card card-content-loader"},oe={class:"load-more-wrap"},ne={class:"main-right"},de=e.defineComponent({name:"FrontendIndex",asyncData(l){const{store:o,route:i,api:t}=l,{params:{id:d,key:c,by:s},fullPath:a}=i,u=E(o),m=k(o);return Promise.all([u.getCategoryList({},t),m.getTrending(void 0,t),m.getArticleList({page:1,limit:10,id:d,path:a,key:c,by:s},t)])},__name:"frontend-index",setup(l){const o=A(),i=E(),t=x(i),d=e.toRef(t,"lists"),c=k(),s=x(c),a=e.toRef(s,"lists"),u=e.toRef(s,"trending");I();const{params:{id:m,key:$,by:w},path:B}=o,[f,v]=D(!1);async function N(r=a.value.page){f.value||(v(!0),await c.getArticleList({page:r,limit:10,id:m,path:B,key:$,by:w}),v(!1))}e.onActivated(()=>{console.log(`frontend-index onActivated:${o.path}`),a.value.path!==o.path&&N(1)});const V=e.computed(()=>{let r="M.M.F 小屋";const{id:n,key:_,by:h}=o.params;if(n){const p=d.value.find(g=>g._id===n);p&&(r=`${p.cate_name} - ${r}`)}else _?r=`搜索: ${_} - ${r}`:h&&(r=`热门 - ${r}`);return r});return L({title:V,meta:[{name:"description",content:V}]}),(r,n)=>{const _=X,h=H,p=S,g=R,C=b;return e.openBlock(),e.createElementBlock("div",Y,[e.createElementVNode("div",Z,[e.createElementVNode("div",ee,[a.value.path?a.value.data.length>0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value.data,y=>(e.openBlock(),e.createBlock(_,{key:y._id,item:y},null,8,["item"]))),128)),e.createElementVNode("div",oe,[a.value.hasNext?(e.openBlock(),e.createElementBlock("a",{key:0,href:"javascript:;",class:e.normalizeClass(["load-more",e.unref(f)?"loading":""]),onClick:n[0]||(n[0]=y=>N())},[e.createTextVNode(e.toDisplayString(e.unref(f)?"加载中":"更多")+" ",1),n[2]||(n[2]=e.createElementVNode("i",{class:"icon icon-circle-loading"},null,-1))],2)):e.createCommentVNode("",!0)])],64)):(e.openBlock(),e.createBlock(h,{key:2},{default:e.withCtx(()=>n[3]||(n[3]=[e.createTextVNode("当前分类还没有文章...")])),_:1})):(e.openBlock(),e.createElementBlock("div",te,[e.createVNode(e.unref(F),{height:160,width:660,speed:2,"primary-color":"#f3f3f3","secondary-color":"#ecebeb"},{default:e.withCtx(()=>n[1]||(n[1]=[e.createElementVNode("rect",{x:"70",y:"15",rx:"4",ry:"4",width:"117",height:"6.4"},null,-1),e.createTextVNode(),e.createElementVNode("rect",{x:"70",y:"35",rx:"3",ry:"3",width:"85",height:"6.4"},null,-1),e.createElementVNode("rect",{x:"0",y:"80",rx:"3",ry:"3",width:"550",height:"6.4"},null,-1),e.createTextVNode(),e.createElementVNode("rect",{x:"0",y:"100",rx:"3",ry:"3",width:"620",height:"6.4"},null,-1),e.createElementVNode("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"401",height:"6.4"},null,-1),e.createTextVNode(),e.createElementVNode("rect",{x:"0",y:"140",rx:"3",ry:"3",width:"501",height:"6.4"},null,-1),e.createElementVNode("circle",{cx:"30",cy:"30",r:"30"},null,-1)])),_:1})]))])]),e.createElementVNode("div",ne,[e.createVNode(p,{category:d.value},null,8,["category"]),e.createVNode(g,{trending:u.value},null,8,["trending"]),e.createVNode(C)])])}}});export{de as default};
