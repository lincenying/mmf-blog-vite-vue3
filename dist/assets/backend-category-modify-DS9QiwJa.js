import{_ as V}from"./a-input.vue_vue_type_script_setup_true_lang-BF10R7es.js";import{v as e,h as v,k as C,s as k,g as x,z as N}from"./vendor-DvyKuS15.js";import{u as p}from"./use-global-category-store-D37QDpdv.js";import{s as f,c as h}from"./main-D8-klkuU.js";/* empty css               */const w={class:"settings-main card"},E={class:"settings-main-content"},M={class:"settings-footer"},I=e.defineComponent({name:"BackendCategoryModify",asyncData(d){const{store:i,route:n,api:r}=d;return p(i).getCategoryItem({path:n.fullPath,id:n.params.id},r)},__name:"backend-category-modify",setup(d){const i=v(),n=C(),r=p(),l=k(r),_=e.toRef(l,"item"),[g,m]=x(!1),a=e.reactive({id:i.params.id,cate_name:"",cate_order:""});e.watch(_.value,o=>{o.data&&(a.cate_name=o.data.cate_name,a.cate_order=o.data.cate_order)}),e.onMounted(async()=>{});async function y(){if(!a.cate_name||!a.cate_order){f("请将表单填写完整!");return}if(g.value)return;m(!0);const{code:o,data:t,message:s}=await h.post("backend/category/modify",a);m(!1),o===200&&(f({type:"success",content:s}),r.updateCategoryItem(t),n.push("/backend/category/list"))}const u=e.ref("编辑分类 - M.M.F 小屋");return N({title:u,meta:[{name:"description",content:u}]}),(o,t)=>{const s=V,b=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",w,[e.createElementVNode("div",E,[e.createVNode(s,{title:"分类名称"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>e.unref(a).cate_name=c),type:"text",placeholder:"分类名称",class:"base-input",name:"cate_name"},null,512),[[e.vModelText,e.unref(a).cate_name]]),t[2]||(t[2]=e.createElementVNode("span",{class:"input-info error"},"请输入分类名称",-1))]),_:1}),e.createVNode(s,{title:"分类排序"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>e.unref(a).cate_order=c),type:"text",placeholder:"分类排序",class:"base-input",name:"cate_order"},null,512),[[e.vModelText,e.unref(a).cate_order]]),t[3]||(t[3]=e.createElementVNode("span",{class:"input-info error"},"请输入分类排序",-1))]),_:1})]),e.createElementVNode("div",M,[e.createElementVNode("a",{href:"javascript:;",class:"btn btn-yellow",onClick:y},"编辑分类"),e.createVNode(b,{to:"/backend/category/list",class:"btn btn-blue"},{default:e.withCtx(()=>t[4]||(t[4]=[e.createTextVNode("返回")])),_:1})])])}}});export{I as default};
